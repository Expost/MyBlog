---
title: 免流问题研究（失败的尝试）
date: 2019-09-08 12:15:17
categories: [琐碎]
---

# 起因

刚工作时，换了联通的工行E卡，每个月19块含2G流量，对于那时的我来说流量是够用的，但后来换了iPhone后，发现流量渐渐不够用了，当时又实在不想换卡，因此网上搜索了一下，发现了免流这个东西。但当时没有好好研究，只是大概看了下，最终还是换了一个电信的流量卡，一个月20G流量，足够自己挥霍了。然而最近流量又有点捉急，因此只能再研究下免流这个东西了。

# 免流研究

经过查阅，免流似乎主要分为本地免流和云免流，本地免流了解的比较少，而云免流的大概原理就是通过使用ssr或openvpn这种代理软件，将代理协议更改为http协议，同时在包头中通过修改`Host`、`Referer`等字段，一般将其改为有免流属性的信息，这样在发送数据包时，运营商的计费平台发现访问的网站（根据Host等字段判断）是符合免流规则的，从而不计入这些流量的费用。

举个例子，拿现在很火的腾讯大王卡来说，其在使用腾讯系等在免流范围内的软件时都会访问特定的域名，比如说访问了`mmbiz.qpic.cn`这个网站，运营商发现你是腾讯大王卡，且这个域名在免流范围内，因此就会将这部分流量给免除掉。基于这个漏洞，我们开启代理服务器，将协议通过混淆，比如我们是访问的其他网站，但是在混淆后，http协议头中的`Host`是`mmbiz.qpic.cn`个域名，这样运营商就会把这部分本来不应该被免流的流量给免除掉，从而达到了免流的目的。

在明白了上述原理后，我们就可以找免流服务比较多的套餐，然后去抓包免流的软件访问的网站，然后一个个测试，直到免流为止。这部分的内容网上有很多教程。比如下面这些。

1. [电信/移动/联通三网通用免流方法，SSR免流教程](https://flyzyblog.com/ssr-free-traffic/)
2. [ssr 免流混淆参数，理论完美支持联通电信全国所有地区](https://www.fbbi.pw/15.html)
3. [全网最详细的ssr免流教程](https://www.stackcc.com/2018/12/31/mianliu/#h6)
4. [ssr免流技术，解除限速](https://2life.top/jc/62/)
5. [关于ssr免流](https://moe.best/tutorial/shadowsocksr-free-flow.html)
6. [[ssr免流详细教程]亲测中国联通可用(腾讯云服务器搭建)](https://www.weibo.com/ttarticle/p/show?id=2309404019145531370983)

这些教程的原理基本上一样，使用抓包软件抓取得到被免流的域名，然后修改ssr软件的http_simple混淆参数为对应的免流域名。在iPhone上可使用免费的[stream](https://apps.apple.com/cn/app/stream/id1312141691)软件进行抓包，ssr软件使用小飞机shadowrocket，而服务器则自己搭建。但自己使用网上已有的免流参数或是自己抓取的参数，在电信卡（99畅享套餐）上尝试多次，都没有成功😓。。。。。猜测是这个电信卡没有定向的免流流量，而普通的免流参数已经被运营商封堵完了。

后来自己不信邪，网上找到了两个提供免流服务的商家，分别是[冰灵云](http://ym.bingly.cn/)和[UY免流](http://yll.dunpaizuouy.com/)，期望测试成功后，可以获取他们的配置参数，之后自己用😂。冰灵云买了1个月，但使用openvpn提示无法连接，后来在UY免流上买了1天体验包，同样使用openvpn提示无法连接。一度怀疑被骗了，后来加了UY的qq群，看群聊似乎确实是可以免的。无奈之下联系了客服，原来这个问题在冰灵云的教程上已经说明了，只是自己没有看到。

>**ios软件导致无法链接的问题**
>
>第一次安装线路会弹出窗口必须点allow，如果没点就删除重装。
>
>如果第一次打开软件没有弹出数据和wifi联网权限窗口就点软件左上角三道杠，再点home，随便输入个邮箱和密码就会自动弹出联网权限窗口。

在成功使用openvpn软件后，测试了几个线路，发现还都是不行。最终认为是自己的套餐真的不容易免流吧。在UY免流的网站上有推荐使用电信的百度圣卡，但自己也懒得折腾了，不想搞那么多卡。由于这东西折腾起来比较浪费时间，待之后很闲时再不断的折腾测试吧。

# 总结

免流这东西归根结底还是利用了运营商的漏洞，既然是漏洞，因此指不定什么时候运营商就修补了，虽然这类漏洞不容易修补完，但每次找混淆参数、测试以及更换套餐等还是挺麻烦的，所以如果不是自己特别闲，还是不要折腾免流了。

如果真的需要使用很多流量，那么首先看看那些定向的免流套餐，如腾讯大王卡是否满足需求，如果希望有很多非定向的流量，那么可以找一些政企套餐、校园套餐、地方特色套餐等套餐，这类套餐一般性价比比较高，但不太容易遇到，有的甚至需要相关证明才能办理。除此之外，也可以尝试使用物联卡，不过在网上看了一些，发现这类卡得需要找到靠谱的商家，否则容易跑路。